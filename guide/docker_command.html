<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>3.Docker常用命令详解 | 文档管理</title>
    <meta name="description" content="点滴积累,成就美好人生!">
    <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="icon" href="/mydocs/img/logo.favicon">
  <link rel="stylesheet" href="/mydocs/css/style.css">
  <script charset="utf-8" src="/mydocs/js/index.js"></script>
    
    <link rel="preload" href="/mydocs/assets/css/0.styles.942a95f1.css" as="style"><link rel="preload" href="/mydocs/assets/js/app.8e80a213.js" as="script"><link rel="preload" href="/mydocs/assets/js/2.05ecca29.js" as="script"><link rel="preload" href="/mydocs/assets/js/12.f4731755.js" as="script"><link rel="prefetch" href="/mydocs/assets/js/10.507bdddb.js"><link rel="prefetch" href="/mydocs/assets/js/11.7df99c17.js"><link rel="prefetch" href="/mydocs/assets/js/13.16a4a66b.js"><link rel="prefetch" href="/mydocs/assets/js/14.84320c72.js"><link rel="prefetch" href="/mydocs/assets/js/3.149355e0.js"><link rel="prefetch" href="/mydocs/assets/js/4.2074a04a.js"><link rel="prefetch" href="/mydocs/assets/js/5.96b7cc1c.js"><link rel="prefetch" href="/mydocs/assets/js/6.d637f9c8.js"><link rel="prefetch" href="/mydocs/assets/js/7.cc8f9b82.js"><link rel="prefetch" href="/mydocs/assets/js/8.d2cf7974.js"><link rel="prefetch" href="/mydocs/assets/js/9.3a186b5c.js">
    <link rel="stylesheet" href="/mydocs/assets/css/0.styles.942a95f1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mydocs/" class="home-link router-link-active"><!----> <span class="site-name">文档管理</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mydocs/guide/" class="nav-link router-link-active">我的文档</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设置" class="dropdown-title"><span class="title">设置</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>切换主题</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mydocs/config/" class="nav-link">主题1</a></li><li class="dropdown-subitem"><a href="/mydocs/config/theme2.html" class="nav-link">主题2</a></li></ul></li></ul></div></div><div class="nav-item"><a href="http://www.kjson.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  工具
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/mydocs/guide/" class="nav-link router-link-active">我的文档</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设置" class="dropdown-title"><span class="title">设置</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>切换主题</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mydocs/config/" class="nav-link">主题1</a></li><li class="dropdown-subitem"><a href="/mydocs/config/theme2.html" class="nav-link">主题2</a></li></ul></li></ul></div></div><div class="nav-item"><a href="http://www.kjson.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  工具
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mydocs/guide/" class="sidebar-link">1.Docker 简介与安装</a></li><li><a href="/mydocs/guide/using_docker.html" class="sidebar-link">2.Docker 的使用</a></li><li><a href="/mydocs/guide/docker_command.html" class="active sidebar-link">3.Docker常用命令详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mydocs/guide/docker_command.html#_1-容器生命周期管理" class="sidebar-link">1.容器生命周期管理</a></li><li class="sidebar-sub-header"><a href="/mydocs/guide/docker_command.html#_2-容器操作" class="sidebar-link">2.容器操作</a></li><li class="sidebar-sub-header"><a href="/mydocs/guide/docker_command.html#_3-容器rootfs命令" class="sidebar-link">3.容器rootfs命令</a></li><li class="sidebar-sub-header"><a href="/mydocs/guide/docker_command.html#_4-镜像仓库" class="sidebar-link">4.镜像仓库</a></li><li class="sidebar-sub-header"><a href="/mydocs/guide/docker_command.html#_5-本地镜像管理" class="sidebar-link">5.本地镜像管理</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_3-docker常用命令详解"><a href="#_3-docker常用命令详解" class="header-anchor">#</a> 3.Docker常用命令详解</h1> <ol><li><a href="#run">run</a></li> <li><a href="#start">start</a></li> <li><a href="#kill">kill</a></li> <li><a href="#create">create</a></li> <li><a href="#exec">exec</a></li> <li><a href="#ps">ps</a></li> <li><a href="#iamges">images</a></li> <li><a href="#pull">pull</a></li> <li><a href="#search">search</a></li> <li><a href="#build">build</a></li> <li><a href="#commit">commit</a></li> <li><a href="#cp">cp</a></li> <li><a href="#create">create</a></li> <li><a href="#rm">rm</a></li> <li><a href="#rmi">rmi</a></li> <li><a href="#tag">tag</a></li> <li><a href="#exec">exec</a></li> <li><a href="#save">save</a></li> <li><a href="#import">import</a></li> <li><a href="#push">push</a></li> <li><a href="#tag">tag</a></li> <li><a href="#diff">diff</a></li></ol> <h2 id="_1-容器生命周期管理"><a href="#_1-容器生命周期管理" class="header-anchor">#</a> 1.容器生命周期管理</h2> <h3 id="run"><a href="#run" class="header-anchor">#</a> run</h3> <p><code>run 创建一个新的容器并运行一个命令</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker run [OPTIONS] IMAGE [COMMAND] [ARG…]
    -d: 后台运行容器，并返回容器ID；
    -i: 以交互模式运行容器，通常与 -t 同时使用；
    -t: 为容器重新分配一个伪输入终端，通常与 -i 同时使用；
    -p: 端口映射，格式为：主机(宿主)端口:容器端口
</code></pre></div><ol><li><p>使用镜像 nginx:latest，以后台模式启动一个容器,将容器的 80 端口映射到主机的 80 端口,主机的目录 /data 映射到容器的 /data。</p> <p>docker run -p 80:80 -v /data:/data -d nginx:latest</p></li> <li><p>绑定容器的 8080 端口，并将其映射到本地主机 127.0.0.1 的 80 端口上。</p> <p>docker run -p 127.0.0.1:80:8080/tcp ubuntu bash</p></li> <li><p>使用镜像nginx:latest以交互模式启动一个容器,在容器内执行/bin/bash命令。</p> <p>docker run -it nginx:latest /bin/bash</p></li></ol> <h3 id="start"><a href="#start" class="header-anchor">#</a> start</h3> <p><code>start/stop/restart 启动一个或多个已经被停止的容器/停止一个运行中的容器/重启容器</code> <code>docker start/stop/restart [OPTIONS] CONTAINER [CONTAINER…]</code>
如：
1. 启动已被停止的容器mynginx
docker start mynginx</p> <h3 id="kill"><a href="#kill" class="header-anchor">#</a> kill</h3> <p><code>kill 杀掉一个运行中的容器</code> <code>docker kill [OPTIONS] CONTAINER [CONTAINER…]</code>
-s :向容器发送一个信号
如：
1. 杀掉运行中的容器mynginx</p> <div class="language-shell extra-class"><pre class="language-text"><code>docker kill -s KILL mynginx
</code></pre></div><h3 id="rm"><a href="#rm" class="header-anchor">#</a> rm</h3> <p><code>rm 删除一个或多少容器</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker rm [OPTIONS] CONTAINER [CONTAINER…]
    -f :通过SIGKILL信号强制删除一个运行中的容器
    -l :移除容器间的网络连接，而非容器本身
    -v :-v 删除与容器关联的卷
</code></pre></div><p>如：</p> <pre><code>1. 强制删除容器db01、db02
</code></pre> <div class="language-shell extra-class"><pre class="language-text"><code>docker rm -f db01 db02
</code></pre></div><ol start="2"><li><p>移除容器nginx01对容器db01的连接，连接名db</p> <p>docker rm -l db</p></li> <li><p>删除容器nginx01,并删除容器挂载的数据卷
docker rm -v nginx01</p></li></ol> <p><code>pause/unpause 暂停容器中所有的进程/恢复容器中所有的进程</code>
docker pause/unpause  [OPTIONS] CONTAINER [CONTAINER…]
如：</p> <ol><li><p>暂停数据库容器db01提供服务</p> <p>docker pause db01</p></li> <li><p>恢复数据库容器db01提供服务</p> <p>docker unpause db01</p></li></ol> <h3 id="create"><a href="#create" class="header-anchor">#</a> create</h3> <p><code>create 创建一个新的容器但不启动它</code></p> <p><code>docker create [OPTIONS] IMAGE [COMMAND] [ARG…]</code>
如：</p> <ol><li>使用docker镜像nginx:latest创建一个容器,并将容器命名为mynginx</li></ol> <div class="language-shell extra-class"><pre class="language-text"><code>docker create  --name mynginx  nginx:latest
</code></pre></div><h3 id="exec"><a href="#exec" class="header-anchor">#</a> exec</h3> <p><code>exec 在运行的容器中执行命令</code></p> <p><code>docker exec [OPTIONS] CONTAINER COMMAND [ARG…]</code>
-d :分离模式: 在后台运行
-i :即使没有附加也保持STDIN 打开
-t :分配一个伪终端
如：</p> <ol><li><p>在容器mynginx中以交互模式执行容器内/root/t.sh脚本</p> <p>docker exec -it mynginx /bin/sh /root/t.sh</p></li> <li><p>在容器mynginx中开启一个交互模式的终端</p> <p>docker exec -i -t  mynginx /bin/bash</p></li></ol> <h1 id="修改欢迎页内容"><a href="#修改欢迎页内容" class="header-anchor">#</a> 修改欢迎页内容</h1> <div class="language-shell extra-class"><pre class="language-text"><code>echo '&lt;h1&gt;Hello, Docker!&lt;/h1&gt;' &gt; /usr/share/nginx/html/index.html
</code></pre></div><h2 id="_2-容器操作"><a href="#_2-容器操作" class="header-anchor">#</a> 2.容器操作</h2> <h3 id="ps"><a href="#ps" class="header-anchor">#</a> ps</h3> <p><code>ps 列出容器</code>
-a :显示所有的容器，包括未运行的。
-f :根据条件过滤显示的内容。
--format :指定返回值的模板文件。
-l :显示最近创建的容器。
-n :列出最近创建的n个容器。
--no-trunc :不截断输出。
-q :静默模式，只显示容器编号。
-s :显示总的文件大小。
如：</p> <ol><li><p>列出所有在运行的容器信息</p> <p>docker ps</p></li> <li><p>列出最近创建的5个容器信息</p> <p>docker ps -n 5</p></li> <li><p>列出所有创建的容器ID</p> <p>docker ps -a -q</p></li></ol> <p><code>inspect 获取容器/镜像的元数据</code>
docker inspect [OPTIONS] NAME|ID [NAME|ID...]
-f :指定返回值的模板文件。
-s :显示总的文件大小。
--type :为指定类型返回JSON。
如：</p> <ol><li>获取镜像mysql:5.6的元信息</li></ol> <p>docker inspect mysql:5.6</p> <ol start="2"><li>获取正在运行的容器dmysql的 IP
docker inspect —format=<code>{range .NetworkSettings.Networks}{.IPAddress}{end}</code> dmysql</li></ol> <p>docker attach [OPTIONS] CONTAINER
要attach上去的容器必须正在运行，可以同时连接上同一个container来共享屏幕（与screen命令的attach类似）。
官方文档中说attach后可以通过CTRL-C来detach，但实际上经过我的测试，如果container当前在运行bash，CTRL-C自然是当前行的输入，没有退出；如果container当前正在前台运行进程，如输出nginx的access.log日志，CTRL-C不仅会导致退出容器，而且还stop了。这不是我们想要的，detach的意思按理应该是脱离容器终端，但容器依然运行。好在attach是可以带上--sig-proxy=false来确保CTRL-D或CTRL-C不会关闭容器。</p> <p>如：</p> <ol><li>容器mynginx将访问日志指到标准输出，连接到容器查看访问信息</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker attach --sig-proxy=false mynginx
</code></pre></div><p><code>events 从服务器获取实时事件</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker events [OPTIONS]
    -f ：根据条件过滤事件；
    --since ：从指定的时间戳后显示所有事件;
    --until ：流水时间显示到指定的时间为止；
</code></pre></div><p>如：</p> <ol><li><p>显示docker 2018年8月1日后的所有事件</p> <p>docker events  --since=“2018-08-01&quot;</p></li> <li><p>显示docker 镜像为mysql:5.6 2018年8月1日后的相关事件</p> <p>docker events -f &quot;image&quot;=&quot;mysql:5.6&quot; --since=&quot;2018-08-01”</p></li></ol> <p>如果指定的时间是到秒级的，需要将时间转成时间戳。如果时间为日期的话，可以直接使用，如--since=&quot;2016-07-01&quot;。</p> <p><code>logs 获取容器的日志</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker logs [OPTIONS] CONTAINER
    -f : 跟踪日志输出
    --since :显示某个开始时间的所有日志
    -t : 显示时间戳
    --tail :仅列出最新N条容器日志
</code></pre></div><p>如：</p> <ol><li><p>跟踪查看容器mynginx的日志输出</p> <p>docker logs -f mynginx</p></li> <li><p>查看容器mynginx从2018年7月1日后的最新10条日志</p> <p>docker logs --since=&quot;2018-07-01&quot; --tail=10 mynginx</p></li></ol> <p><code>wait 阻塞运行直到容器停止，然后打印出它的退出代码</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker wait [OPTIONS] CONTAINER [CONTAINER…]
</code></pre></div><p>如：</p> <ol><li>docker wait CONTAINER</li></ol> <p><code>export 将文件系统作为一个tar归档文件导出到STDOUT</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker export [OPTIONS] CONTAINER
    -o :将输入内容写到文件。
</code></pre></div><p>如：</p> <ol><li><p>将id为a404c6c174a2的容器按日期保存为tar文件</p> <pre><code> docker export -o mysql-`date +%Y%m%d`.tar a404c6c174a2
</code></pre></li></ol> <p><code>port 列出指定的容器的端口映射，或者查找将PRIVATE_PORT NAT到面向公众的端口</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker port [OPTIONS] CONTAINER [PRIVATE_PORT[/PROTO]]
</code></pre></div><p>如：</p> <ol><li>查看容器mynginx的端口映射情况</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker port mymysql
</code></pre></div><h2 id="_3-容器rootfs命令"><a href="#_3-容器rootfs命令" class="header-anchor">#</a> 3.容器rootfs命令</h2> <h3 id="commit"><a href="#commit" class="header-anchor">#</a> commit</h3> <p><code>commit 从容器创建一个新的镜像</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]
    -a :提交的镜像作者；
    -c :使用Dockerfile指令来创建镜像；
    -m :提交时的说明文字；
    -p :在commit时，将容器暂停。
</code></pre></div><p>如：</p> <ol><li>将容器a404c6c174a2 保存为新的镜像,并添加提交人信息和说明信息</li></ol> <div class="language- extra-class"><pre class="language-text"><code>1. docker commit -a “leo&quot; -m &quot;my apache&quot; a404c6c174a2  mymysql:v1 
2. docker commit \
    --author &quot;leo &lt;myemail@gmail.com&gt;&quot; \
    --message &quot;修改了默认主页&quot; \
    mynginx \
    nginx:v2
</code></pre></div><h3 id="cp"><a href="#cp" class="header-anchor">#</a> cp</h3> <p><code>cp 用于容器与主机之间的数据拷贝</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH|-
   docker cp [OPTIONS] SRC_PATH|- CONTAINER:DEST_PATH
   -L :保持源目标中的链接
</code></pre></div><p>如：</p> <ol><li>将主机/www/test目录拷贝到容器96f7f14e99ab的/www目录下。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker cp /www/test 96f7f14e99ab:/www/
</code></pre></div><ol start="2"><li>将主机/www/test目录拷贝到容器96f7f14e99ab中，目录重命名为www</li></ol> <div class="language- extra-class"><pre class="language-text"><code>    docker cp /www/test 96f7f14e99ab:/www
</code></pre></div><ol start="3"><li>将容器96f7f14e99ab的/www目录拷贝到主机的/tmp目录中</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker cp  96f7f14e99ab:/www /tmp/
</code></pre></div><h3 id="diff"><a href="#diff" class="header-anchor">#</a> diff</h3> <p><code>diff 检查容器里文件结构的更改</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker diff [OPTIONS] CONTAINER
</code></pre></div><p>如：</p> <ol><li>查看容器mymysql的文件结构更改</li></ol> <p>docker diff mymysql
docker diff mginx</p> <h2 id="_4-镜像仓库"><a href="#_4-镜像仓库" class="header-anchor">#</a> 4.镜像仓库</h2> <p><code>login/logout 登陆/登出到一个Docker镜像仓库，如果未指定镜像仓库地址，默认为官方仓库 Docker Hub</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker login/logout [OPTIONS] [SERVER]

-u :登陆的用户名
-p :登陆的密码
</code></pre></div><p>如：</p> <ol><li><p>登陆到Docker Hub</p> <p>docker login -u 用户名 -p 密码</p></li> <li><p>登出Docker Hub</p> <p>docker logout</p></li></ol> <h3 id="pull"><a href="#pull" class="header-anchor">#</a> pull</h3> <p><code>pull 从镜像仓库中拉取或者更新指定镜像</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker pull [OPTIONS] NAME[:TAG|@DIGEST]

-a :拉取所有 tagged 镜像
--disable-content-trust :忽略镜像的校验,默认开启
</code></pre></div><p>如：</p> <ol><li>从Docker Hub下载java最新版镜像</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker pull java
</code></pre></div><ol start="2"><li>从Docker Hub下载REPOSITORY为java的所有镜像</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker pull -a java
</code></pre></div><h3 id="push"><a href="#push" class="header-anchor">#</a> push</h3> <p><code>push 将本地的镜像上传到镜像仓库,要先登陆到镜像仓库</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker push [OPTIONS] NAME[:TAG]

--disable-content-trust :忽略镜像的校验,默认开启
</code></pre></div><p>如：</p> <ol><li>上传本地镜像myapache:v1到镜像仓库中</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker push myapache:v1
</code></pre></div><h3 id="search"><a href="#search" class="header-anchor">#</a> search</h3> <p><code>search 从Docker Hub查找镜像</code></p> <div class="language- extra-class"><pre class="language-text"><code>    docker search [OPTIONS] TERM
    --automated :只列出 automated build类型的镜像；
    --no-trunc :显示完整的镜像描述；
    -s :列出收藏数不小于指定值的镜像
</code></pre></div><p>如：</p> <ol><li>从Docker Hub查找所有镜像名包含java，并且收藏数大于10的镜像</li></ol> <div class="language-shell extra-class"><pre class="language-text"><code>docker search -s 10 java
</code></pre></div><h2 id="_5-本地镜像管理"><a href="#_5-本地镜像管理" class="header-anchor">#</a> 5.本地镜像管理</h2> <h3 id="images"><a href="#images" class="header-anchor">#</a> images</h3> <p><code>images 列出本地镜像</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker images [OPTIONS] [REPOSITORY[:TAG]]
    -a :列出本地所有的镜像（含中间映像层，默认情况下，过滤掉中间映像层）；
    --digests :显示镜像的摘要信息；
    -f :显示满足条件的镜像；
    --format :指定返回值的模板文件；
    --no-trunc :显示完整的镜像信息；
    -q :只显示镜像ID。
</code></pre></div><p>如：</p> <ol><li><p>查看本地镜像列表</p> <p>docker images</p></li> <li><p>列出本地镜像中REPOSITORY为ubuntu的镜像列表</p> <p>docker images  ubuntu​</p></li></ol> <h3 id="rmi"><a href="#rmi" class="header-anchor">#</a> rmi</h3> <p><code>rmi 删除本地一个或多少镜像</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker rmi [OPTIONS] IMAGE [IMAGE…]
    -f :强制删除；
    -no-prune :不移除该镜像的过程镜像，默认移除；
</code></pre></div><p>如：</p> <ol><li>强制删除本地镜像test/ubuntu:v4</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker rmi -f test/ubuntu:v4
</code></pre></div><h3 id="tag"><a href="#tag" class="header-anchor">#</a> tag</h3> <p><code>tag 标记本地镜像，将其归入某一仓库</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker tag [OPTIONS] IMAGE[:TAG] [REGISTRYHOST/][USERNAME/]NAME[:TAG]
</code></pre></div><p>如：</p> <ol><li>将镜像ubuntu:15.10标记为 test/ubuntu:v3 镜像</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker tag ubuntu:15.10 test/ubuntu:v3
</code></pre></div><h3 id="build"><a href="#build" class="header-anchor">#</a> build</h3> <p><code>build 命令用于使用 Dockerfile 创建镜像</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker build [OPTIONS] PATH | URL | -
    
    --build-arg=[] :设置镜像创建时的变量；
    --cpu-shares :设置 cpu 使用权重；
    --cpu-period :限制 CPU CFS周期；
    --cpu-quota :限制 CPU CFS配额；
    --cpuset-cpus :指定使用的CPU id；
    --cpuset-mems :指定使用的内存 id；
    --disable-content-trust :忽略校验，默认开启；
    -f :指定要使用的Dockerfile路径；
    --force-rm :设置镜像过程中删除中间容器；
    --isolation :使用容器隔离技术；
    --label=[] :设置镜像使用的元数据；
    -m :设置内存最大值；
    --memory-swap :设置Swap的最大值为内存+swap，&quot;-1&quot;表示不限swap；
    --no-cache :创建镜像的过程不使用缓存；
    --pull :尝试去更新镜像的新版本；
    --quiet, -q :安静模式，成功后只输出镜像 ID；
    --rm :设置镜像成功后删除中间容器；
    --shm-size :设置/dev/shm的大小，默认值是64M；
    --ulimit :Ulimit配置。
    --tag, -t: 镜像的名字及标签，通常 name:tag 或者 name 格式；可以在一次构建中为一个镜像设置多个标签。
    --network: 默认 default。在构建期间设置RUN指令的网络模式
</code></pre></div><p>如：</p> <ol><li>使用当前目录的 Dockerfile 创建镜像，标签为 test/ubuntu:v1</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker build -t test/ubuntu:v1 .​
</code></pre></div><ol start="2"><li>使用URL github.com/creack/docker-firefox 的 Dockerfile 创建镜像</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker build github.com/creack/docker-firefox
</code></pre></div><ol start="3"><li>也可以通过 -f Dockerfile 文件的位置</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker build -f /path/to/a/Dockerfile .
</code></pre></div><ol start="4"><li>在 Docker 守护进程执行 Dockerfile 中的指令前，首先会对 Dockerfile 进行语法检查，有语法错误时会返回</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker build -t test/myapp .
</code></pre></div><p><code>history 查看指定镜像的创建历史</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker history [OPTIONS] IMAGE
    -H :以可读的格式打印镜像大小和日期，默认为true；
    --no-trunc :显示完整的提交记录；
    -q :仅列出提交记录ID。
</code></pre></div><p>如：</p> <ol><li>查看本地镜像test/ubuntu:v3的创建历史</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker history test/ubuntu:v3​
</code></pre></div><h3 id="save"><a href="#save" class="header-anchor">#</a> save</h3> <p><code>save/load 将指定镜像保存成 tar 归档文件/导入</code></p> <div class="language- extra-class"><pre class="language-text"><code>ocker save [OPTIONS] IMAGE [IMAGE…]
    -o :输出到的文件
</code></pre></div><p>如：</p> <ol><li>将镜像test/ubuntu:v3 生成my_ubuntu_v3.tar文档</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker save -o my_ubuntu_v3.tar test/ubuntu:v3
</code></pre></div><ol start="2"><li>将ubuntu.tar从归档文件导入镜像</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker load&lt;ubuntu.tar
</code></pre></div><h3 id="import"><a href="#import" class="header-anchor">#</a> import</h3> <p><code>import/</code><a href="#export">export</a><code>从归档文件中创建镜像/将文件系统作为一个tar归档文件导出到STDOUT</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker import [OPTIONS] file|URL|- [REPOSITORY[:TAG]]
    -c :应用docker 指令创建镜像；
    -m :提交时的说明文字；
</code></pre></div><p>如：</p> <ol><li>从镜像归档文件my_ubuntu_v3.tar创建镜像，命名为test/ubuntu:v4</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker import  my_ubuntu_v3.tar test/ubuntu:v4
</code></pre></div><ol start="2"><li>将id为a404c6c174a2的容器按日期保存为tar文件</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker export -o mysql-`date +%Y%m%d`.tar a404c6c174a2
</code></pre></div><h3 id="info-version"><a href="#info-version" class="header-anchor">#</a> info|version</h3> <p><code>info 显示 Docker 系统信息，包括镜像和容器数</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker info [OPTIONS]
</code></pre></div><p>如：</p> <ol><li>查看docker系统信息</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker info
</code></pre></div><p><code>version 显示 Docker 版本信息</code></p> <div class="language- extra-class"><pre class="language-text"><code>docker version [OPTIONS]

    -f :指定返回值的模板文件。
</code></pre></div><p>如：</p> <ol><li>显示 Docker 版本信息</li></ol> <div class="language-shell extra-class"><pre class="language-text"><code>docker version
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/mydocs/guide/using_docker.html" class="prev">2.Docker 的使用</a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/mydocs/assets/js/app.8e80a213.js" defer></script><script src="/mydocs/assets/js/2.05ecca29.js" defer></script><script src="/mydocs/assets/js/12.f4731755.js" defer></script>
  </body>
</html>
